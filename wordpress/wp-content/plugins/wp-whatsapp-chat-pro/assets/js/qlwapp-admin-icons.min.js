(function(c){var d=Backbone.Model.extend({defaults:{icon:"qlwapp-whatsapp-icon"}});var a=Backbone.View.extend({events:{"click .attachments .attachment":"select","click .media-modal-backdrop":"close","click .media-modal-close":"close","submit .media-modal-form":"submit"},templates:{},initialize:function(){_.bindAll(this,"open","render","close","submit");this.init();this.open()},init:function(){this.templates.window=wp.template("qlwapp-modal-window")},current:function(g){var f=this;if(f.model.attributes.icon!=""){f.$el.find("."+f.model.attributes.icon).closest("li").focus()}},select:function(f){this.model.set({icon:c(f.target).find("i").attr("class")});this.render();this.enable()},render:function(){var e=this;e.$el.html(e.templates.window(e.model.attributes));this.current()},open:function(f){this.render();c("body").addClass("modal-open").append(this.$el)},close:function(f){f.preventDefault();this.undelegateEvents();c(document).off("focusin");c("body").removeClass("modal-open");this.remove();return},enable:function(f){c(".media-modal-submit").removeProp("disabled")},submit:function(g){g.preventDefault();var f=this;var h=c('input[name="icon"]');if(h.length&&f.model.attributes.icon){h.val(f.model.attributes.icon)}f.close(g)}});var b=Backbone.View.extend({initialize:function(i){var h=c(i.target),g=h.closest("tr").find("input[name=icon]").val();var f=new d();f.set({icon:g});new a({model:f})},});c("#qlwapp_icon_add").on("click",function(f){f.preventDefault();new b(f)})})(jQuery);