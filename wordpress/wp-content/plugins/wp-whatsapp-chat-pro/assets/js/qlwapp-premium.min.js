(function(b){var a={__instance:undefined};a.Application=Backbone.View.extend({id:"qlwapp_modal",events:{"click .close":"Close","click .remove":"Remove","click .save":"Save","click .attachments .attachment":"Select","keyup #media-search-input":"Search",},ui:{nav:undefined,content:undefined,media:undefined},templates:{},initialize:function(c){_.bindAll(this,"render","preserveFocus","Select","Close","Save","Remove");this.initialize_templates();this.render(c);this.backdrop(c)},backdrop:function(d){var c=this;b(document).on("click",".media-modal-backdrop",function(f){c.Close(f)})},initialize_templates:function(){this.templates.window=wp.template("qlwapp-modal-window");this.templates.backdrop=wp.template("qlwapp-modal-backdrop")},render:function(c){this.$el.attr("tabindex","0").append(this.templates.window(a)).append(this.templates.backdrop());b(document).on("focusin",this.preserveFocus);b("body").addClass("modal-open").append(this.$el);this.$el.focus()},preserveFocus:function(c){if(this.$el[0]!==c.target&&!this.$el.has(c.target).length){this.$el.focus()}},Select:function(f){var d=b(f.target),g=this.$el.find("input#qlwapp_icon"),c=d.find("i").attr("class");g.val(c)},Close:function(c){c.preventDefault();this.undelegateEvents();b(document).off("focusin");b("body").removeClass("modal-open");this.remove();a.__instance=undefined},Save:function(f){f.preventDefault();var d=this;var g=b('input[name="qlwapp[button][icon]"]'),c=this.$el.find("input#qlwapp_icon").val();if(g.length&&c){g.val(c)}d.Close(f)},Remove:function(h){h.preventDefault();var g=this,d=b("form",this.$el),f=this.$el.data("menu_item_id");if(!f){return}if(!d.length){return}var i=b("#menu-to-edit").find("#menu-item-"+f),c=i.find(".menu-item-qlwapp_icon");if(!i.length){return}d.find(".qlwapp-input").each(function(j){var e=b(this).prop("id").match(/qlwapp-input-([a-z]+)/)[1];i.find("input#qlwapp-input-"+e).val("")});c.remove();g.Close(h)}});b(document).on("click","#btn-add-icon",function(c){c.preventDefault();if(a.__instance===undefined){a.__instance=new a.Application(c)}return false})})(jQuery);